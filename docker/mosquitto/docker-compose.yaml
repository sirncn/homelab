services:
  mosquitto:
    image: eclipse-mosquitto:2.0.22@sha256:d219d3a72847f3aed6a1d66975972d3b17f86e39e8f6f6b86b4088b879c1a2d6
    container_name: mosquitto
    ports:
      - 1883:1883
      - 8883:8883
      - 9001:9001
    networks:
      - iot-intra
    volumes:
      - $MOSQUITTO_VOL_CONFIG:/mosquitto/config
      - $MOSQUITTO_VOL_DATA:/mosquitto/data
    restart: unless-stopped

networks:
  iot-intra:
    external: true
